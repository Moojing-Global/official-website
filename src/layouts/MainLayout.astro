---
import BaseHead from "@components/BaseHead.astro";
import type { SeoMeta } from "@components/BaseHead.astro";
import Navbar from "@components/Navbar.astro";
import "../styles/global.css";
import "@tailwindplus/elements";

export interface Props {
    // Support passing a seoMeta object directly
    seoMeta?: SeoMeta;
    // Or individual props (backwards compatible)
    title?: string;
    description?: string;
    canonical?: string;
    image?: string;
    imageAlt?: string;
    type?: "website" | "article";
    noindex?: boolean;
    author?: string;
    pubDate?: Date;
}

// Get current path for active nav state
const currentPath = Astro.url.pathname;
---

<!doctype html>
<html lang="en" class="h-full font-sans">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <BaseHead {...Astro.props} />
        <script is:inline>
            // Load theme from localStorage before page renders to avoid flash
            try {
                const theme = localStorage.getItem("theme") || "light";
                if (theme === "dark") {
                    document.documentElement.classList.add("dark");
                }
            } catch (e) {}
        </script>
    </head>
    <body class="bg-background h-full font-sans">
        <!-- Skip to main content link (keyboard accessible) -->
        <a
            href="#main-content"
            class="focus:bg-primary focus:text-primary-foreground focus:ring-primary sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:rounded focus:px-4 focus:py-2 focus:ring-2 focus:ring-offset-2 focus:outline-none"
        >
            Skip to main content
        </a>

        <Navbar currentPath={currentPath} />

        <main id="main-content" class="pt-16">
            <slot />
        </main>
    </body>
</html>
